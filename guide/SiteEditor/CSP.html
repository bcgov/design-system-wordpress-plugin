<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Content Security Policy (CSP) — Admin Tool Guide | Design System WordPress Plugin</title><meta name="description" content="Developer Documentation for Design System WordPress Plugin">
    <link rel="preload" href="/design-system-wordpress-plugin/assets/style-C1gpHASQ.css" as="style"><link rel="stylesheet" href="/design-system-wordpress-plugin/assets/style-C1gpHASQ.css">
    <link rel="modulepreload" href="/design-system-wordpress-plugin/assets/app-0VcWniPY.js"><link rel="modulepreload" href="/design-system-wordpress-plugin/assets/CSP.html-Ba1i435x.js">
    <link rel="prefetch" href="/design-system-wordpress-plugin/assets/index.html-C_X_KeWo.js" as="script"><link rel="prefetch" href="/design-system-wordpress-plugin/assets/AutoAnchor.html-aCRC4Ym4.js" as="script"><link rel="prefetch" href="/design-system-wordpress-plugin/assets/BreadCrumb.html-TpAQL2_c.js" as="script"><link rel="prefetch" href="/design-system-wordpress-plugin/assets/InPageNavigation.html-CiNyxJiR.js" as="script"><link rel="prefetch" href="/design-system-wordpress-plugin/assets/Navigation.html-CVXyYPnM.js" as="script"><link rel="prefetch" href="/design-system-wordpress-plugin/assets/NotificationBanner.html-8bu_taVk.js" as="script"><link rel="prefetch" href="/design-system-wordpress-plugin/assets/404.html-DMLRHDa1.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/design-system-wordpress-plugin/"><!----><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Design System WordPress Plugin</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/design-system-wordpress-plugin/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/bcgov/design-system-wordpress-plugin" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search..." autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/design-system-wordpress-plugin/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/bcgov/design-system-wordpress-plugin" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">Site Editor <span class="down arrow"></span></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/design-system-wordpress-plugin/guide/SiteEditor/CSP.html" aria-label="CSP"><!--[--><!--[--><!--]--><!--]-->CSP<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/design-system-wordpress-plugin/guide/SiteEditor/NotificationBanner.html" aria-label="Notification Banner"><!--[--><!--[--><!--]--><!--]-->Notification Banner<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/design-system-wordpress-plugin/guide/SiteEditor/InPageNavigation.html" aria-label="In Page Navigation"><!--[--><!--[--><!--]--><!--]-->In Page Navigation<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/design-system-wordpress-plugin/guide/SiteEditor/Navigation.html" aria-label="Navigation"><!--[--><!--[--><!--]--><!--]-->Navigation<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/design-system-wordpress-plugin/guide/SiteEditor/AutoAnchor.html" aria-label="Auto Anchor"><!--[--><!--[--><!--]--><!--]-->Auto Anchor<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/design-system-wordpress-plugin/guide/SiteEditor/BreadCrumb.html" aria-label="BreadCrumb"><!--[--><!--[--><!--]--><!--]-->BreadCrumb<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Developers <span class="right arrow"></span></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="content-security-policy-csp-—-admin-tool-guide" tabindex="-1"><a class="header-anchor" href="#content-security-policy-csp-—-admin-tool-guide"><span>Content Security Policy (CSP) — Admin Tool Guide</span></a></h1><p>Use this tool to control which sources your WordPress site can load for scripts, styles, images, fonts, media, XHR/WebSocket connections, and frames. Tight CSP rules improve security and reduce the risk of cross‑site scripting (XSS).</p><p>The tool lives in:</p><ul><li>WordPress Admin → Design System → Content Security Policy</li></ul><p>Click Save Settings to apply changes.</p><p><img src="/design-system-wordpress-plugin/images/CSP_HOWTO.gif" alt="CSP Howto"></p><hr><h2 id="how-the-form-works" tabindex="-1"><a class="header-anchor" href="#how-the-form-works"><span>How the form works</span></a></h2><ul><li>Each field accepts a space‑separated allowlist of sources (no commas).</li><li>If a field is left empty, the plugin uses its built‑in defaults (shown as helper text under each label).</li><li>You can add: <ul><li>Keywords: <code>&#39;self&#39;</code> <code>&#39;none&#39;</code> <code>&#39;unsafe-inline&#39;</code> <code>&#39;unsafe-eval&#39;</code> <code>data:</code> <code>blob:</code> <code>https:</code></li><li>Hosts: <code>example.com</code> <code>sub.example.com</code></li><li>Wildcards: <code>*.example.com</code></li></ul></li><li>Use the least‑privilege set you can. Prefer HTTPS. Avoid <code>&#39;unsafe-inline&#39;</code> and <code>&#39;unsafe-eval&#39;</code> when possible.</li></ul><p>Tip: To revert a directive to defaults, clear the field and Save Settings. To block a type entirely, enter <code>&#39;none&#39;</code>.</p><hr><h2 id="directive-reference" tabindex="-1"><a class="header-anchor" href="#directive-reference"><span>Directive reference</span></a></h2><p>Below is what each field controls and examples of what you might add. The defaults shown in the UI include the design system’s domains (e.g., gov.bc.ca, twimg.com, flickr domains, and YouTube for embeds).</p><h3 id="default-src-policy" tabindex="-1"><a class="header-anchor" href="#default-src-policy"><span>Default-src Policy</span></a></h3><ul><li>Fallback for all resource types without an explicit directive.</li><li>Keep minimal. Add broad hosts here only if you can’t scope them to a more specific directive.</li></ul><p>Example additions:</p><ul><li><code>https: cdn.example.com</code></li></ul><h3 id="script-src-policy" tabindex="-1"><a class="header-anchor" href="#script-src-policy"><span>Script-src Policy</span></a></h3><ul><li>JavaScript files and inline JS.</li><li>Prefer hosted files over inline scripts. Remove &#39;unsafe-inline&#39;/&#39;unsafe-eval&#39; if your site doesn’t require them.</li></ul><p>Example additions:</p><ul><li><code>cdn.jsdelivr.net cdn.skypack.dev www.googletagmanager.com www.google-analytics.com</code></li></ul><h3 id="style-src-policy" tabindex="-1"><a class="header-anchor" href="#style-src-policy"><span>Style-src Policy</span></a></h3><ul><li>CSS files and inline styles.</li><li>If you must allow inline styles, keep &#39;unsafe-inline&#39;. Consider using hashed inline styles instead of broad allowance.</li></ul><p>Example additions:</p><ul><li><code>fonts.googleapis.com cdn.jsdelivr.net</code></li></ul><h3 id="connect-src-policy" tabindex="-1"><a class="header-anchor" href="#connect-src-policy"><span>Connect-src Policy</span></a></h3><ul><li>Fetch/XHR, WebSocket, EventSource, analytics beacons, and GraphQL endpoints.</li></ul><p>Example additions:</p><ul><li><code>api.example.com *.sentry.io</code></li></ul><h3 id="img-src-policy" tabindex="-1"><a class="header-anchor" href="#img-src-policy"><span>Img-src Policy</span></a></h3><ul><li>Images and favicons. data: allows inline base64 images.</li></ul><p>Example additions:</p><ul><li><code>i.ytimg.com cdn.example.com data:</code></li></ul><h3 id="font-src-policy" tabindex="-1"><a class="header-anchor" href="#font-src-policy"><span>Font-src Policy</span></a></h3><ul><li>Font files (woff, woff2, ttf). data: enables embedded fonts like <code>data:font/woff2;base64,d09GMgABAAAAAA...&#39;)</code></li></ul><p>Example additions:</p><ul><li><code>fonts.gstatic.com data:</code></li></ul><h3 id="media-src-policy" tabindex="-1"><a class="header-anchor" href="#media-src-policy"><span>Media-src Policy</span></a></h3><ul><li>Audio and video files (not iframes).</li></ul><p>Example additions:</p><ul><li><code>media.example.com</code></li></ul><h3 id="frame-src-policy" tabindex="-1"><a class="header-anchor" href="#frame-src-policy"><span>Frame-src Policy</span></a></h3><ul><li>Origins allowed in iframes (and workers for some browsers).</li></ul><p>Example additions:</p><ul><li><code>*.youtube.com youtu.be *.vimeo.com *.rumble.com</code></li></ul><hr><h2 id="common-recipes" tabindex="-1"><a class="header-anchor" href="#common-recipes"><span>Common recipes</span></a></h2><ul><li><p>Google Fonts</p><ul><li>style-src: <code>fonts.googleapis.com</code></li><li>font-src: <code>fonts.gstatic.com data</code>:</li></ul></li><li><p>YouTube/Vimeo embeds</p><ul><li>frame-src: <code>*.youtube.com youtu.be *.vimeo.com</code></li><li>img-src: <code>i.ytimg.com</code> (for thumbnails)</li></ul></li><li><p>Mapbox</p><ul><li>script-src: <code>api.mapbox.com</code></li><li>style-src: <code>api.mapbox.com</code></li><li>img-src: <code>api.mapbox.com</code></li><li>connect-src: <code>events.mapbox.com</code></li></ul></li><li><p>Generic CDN</p><ul><li>Add the CDN host to the specific directive you need (script-src, style-src, img-src, etc.), e.g., <code>cdn.example.com</code></li></ul></li></ul><hr><h2 id="testing-changes" tabindex="-1"><a class="header-anchor" href="#testing-changes"><span>Testing changes</span></a></h2><ol><li>Save Settings.</li><li>Hard‑refresh the page in your browser (Shift+Reload).</li><li>Open DevTools → Console. Look for “Refused to connect/script/style from … because it violates the Content Security Policy”.</li><li>Add the blocked origin to the correct directive and save again.</li><li>Repeat until violations are gone.</li></ol><p>Tip: If something still doesn’t load, verify the exact hostname in the violation message and add that host (or a wildcard like *.example.com) to the correct directive.</p><p><img src="/design-system-wordpress-plugin/images/CSP_FRAME_SRC.gif" alt="CSP Frame Source"></p><hr><h2 id="faq" tabindex="-1"><a class="header-anchor" href="#faq"><span>FAQ</span></a></h2><ul><li><p>How do I reset to defaults?</p><ul><li>Clear the field and click Save Settings.</li></ul></li><li><p>Can I disable a resource type completely?</p><ul><li>Enter &#39;none&#39; in that directive and save.</li></ul></li><li><p>Do I need commas?</p><ul><li>No. Use spaces between entries.</li></ul></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 49036255+ASpiteri-BCGov@users.noreply.github.com">ASpiteri-BCGov</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/design-system-wordpress-plugin/guide/SiteEditor/NotificationBanner.html" aria-label="Notification Banner"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Notification Banner</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/design-system-wordpress-plugin/assets/app-0VcWniPY.js" defer></script>
  </body>
</html>
