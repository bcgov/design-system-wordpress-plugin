.wp-block-custom-navigation {

	.wp-block-navigation-submenu {

		> .wp-block-navigation-item__content {
			position: relative;
			padding-right: 56px;

			&::after {
				content: "";
				position: absolute;
				right: 20px;
				top: 50%;
				transform: translateY(-50%);
				width: 14px;
				height: 10px;
				background-image: url(./assets/chevron.svg);
				background-repeat: no-repeat;
				background-position: center;
				opacity: 0.6;
				pointer-events: none;
				z-index: 2;
			}
		}

		&.has-child {

			> .wp-block-navigation-item__content::after {
				display: block;
			}
		}

		&:hover {

			> .wp-block-navigation-item__content::after {
				opacity: 1;
			}
		}
	}
}

// Ensure the submenu container appears above the arrow
.wp-block-navigation__submenu-container {
	position: relative;
	z-index: 3;
}

// Ensure block appender stays on top
.block-list-appender {
	position: relative;
	z-index: 4;
}

// Editor-specific styles for hamburger menu visibility
.wp-block-design-system-wordpress-plugin-navigation {
	// Ensure nav element has positioning context for absolute children
	&.dswp-block-navigation-is-mobile-overlay,
	&.dswp-block-navigation-is-always-overlay {
		position: relative;
		min-height: 3rem; // Ensure space for hamburger icon
	}

	// Show hamburger icon in editor when mobile or always overlay is selected
	&.dswp-block-navigation-is-mobile-overlay,
	&.dswp-block-navigation-is-always-overlay {
		.dswp-nav-mobile-toggle-icon {
			display: flex !important;
		}

		// Hide menu container when closed
		.dswp-block-navigation__container.is-menu-closed {
			display: none !important;
		}

		// Show menu container when open (so links can be edited)
		.dswp-block-navigation__container.is-menu-open {
			display: flex !important;
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			width: 100%;
			background: var(--dswp-surface-color-background-white, #fff);
			z-index: 1000;
			padding: 1rem;
			box-sizing: border-box;
			margin-top: 0.5rem;
			border: 1px solid rgba(0, 0, 0, 0.1);
			border-radius: 4px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			flex-direction: column;
			align-items: stretch;
			gap: 0.5rem;

			> .wp-block-navigation-item {
				width: 100%;
				text-align: left;
				border-right: none;
				border-bottom: 1px solid rgba(0, 0, 0, 0.1);
				flex: none;
				margin: 0;

				> .wp-block-navigation-item__content {
					padding: 0.75rem 1rem;
					min-height: 44px;
					display: flex;
					align-items: center;
				}

				&:last-child {
					border-bottom: none;
				}
			}
		}
	}

	// Hide hamburger when never overlay is selected
	&.dswp-block-navigation-is-never-overlay {
		.dswp-nav-mobile-toggle-icon {
			display: none !important;
		}
	}
}
