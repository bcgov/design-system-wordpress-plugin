(()=>{"use strict";var e,n={710:()=>{const e=window.wp.blocks,n=window.wp.components,t=window.wp.i18n,o=window.wp.element,s=window.wp.data,r=window.wp.blockEditor,a=window.wp.coreData,i=window.ReactJSXRuntime;function l(){return(0,i.jsxs)("button",{className:"dswp-nav-mobile-toggle-icon","aria-label":"Toggle menu","aria-expanded":"false",children:[(0,i.jsx)("span",{className:"dswp-nav-mobile-menu-icon-text",children:"Menu"}),(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-top-bar",d:"M3,6h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-middle-bar",d:"M3,12h13",strokeWidth:"1",stroke:"currentColor"}),(0,i.jsx)("path",{className:"dswp-nav-mobile-bar dswp-nav-mobile-menu-bottom-bar",d:"M3,18h13",strokeWidth:"1",stroke:"currentColor"})]})]})}const c=["core/navigation-link","core/navigation-submenu","core/spacer"],u=JSON.parse('{"UU":"design-system-wordpress-plugin/navigation"}');(0,e.registerBlockType)(u.UU,{edit:function({attributes:u,setAttributes:p,clientId:d}){const{menuId:w,overlayMenu:v,mobileBreakpoint:b=768,showInDesktop:m,showInMobile:h}=u,{replaceInnerBlocks:g}=(0,s.useDispatch)(r.store),{editEntityRecord:k,saveEditedEntityRecord:y}=(0,s.useDispatch)(a.store),_=(0,s.useRegistry)(),f=(0,r.useBlockProps)({className:`dswp-block-navigation-is-${v}-overlay`,"data-dswp-mobile-breakpoint":b}),{menus:x,hasResolvedMenus:j,selectedMenu:B,currentBlocks:M,isCurrentPostSaving:C}=(0,s.useSelect)((e=>{const{getEntityRecords:n,hasFinishedResolution:t,getEditedEntityRecord:o}=e(a.store),s={per_page:-1,status:["publish","draft"]};return{menus:n("postType","wp_navigation",s),hasResolvedMenus:t("getEntityRecords",["postType","wp_navigation",s]),selectedMenu:w?o("postType","wp_navigation",w):null,currentBlocks:e(r.store).getBlocks(d),isCurrentPostSaving:e("core/editor")?.isSavingPost()}}),[w,d]),I=(0,o.useRef)(null),R=(0,o.useRef)(!0),S=(0,o.useRef)(null),T=(0,o.useCallback)((n=>n.map((n=>{var t;if("core/spacer"===n.name)return(0,e.createBlock)("core/spacer",n.attributes||{});const o={...n.attributes,opensInNewTab:null!==(t=n.attributes?.opensInNewTab)&&void 0!==t&&t};return"core/navigation-link"===n.name?(0,e.createBlock)("core/navigation-link",o):"core/navigation-submenu"===n.name?(0,e.createBlock)("core/navigation-submenu",o,n.innerBlocks?T(n.innerBlocks):[]):n})).filter(Boolean)),[]);(0,o.useEffect)((()=>{if(B?.content&&R.current){const n=(0,e.parse)(B.content);S.current=(0,e.serialize)(n),I.current=S.current}}),[B,_]),(0,o.useEffect)((()=>{if(!C||!w||!M)return;const n=(0,e.serialize)(M);n===I.current||R.current&&n===S.current||(I.current=n,(async()=>{try{await k("postType","wp_navigation",w,{content:n,status:"publish"}),await y("postType","wp_navigation",w)}catch(e){throw new Error("Failed to update navigation menu:",e)}})())}),[C,w,M,k,y]),(0,o.useEffect)((()=>{if(!B||!B.content)return g(d,[]),I.current=(0,e.serialize)([]),void(R.current=!1);const n=(0,e.parse)(B.content),t=T(n);g(d,t),R.current&&(I.current=(0,e.serialize)(t),S.current=I.current,R.current=!1)}),[B,_,d,T,g]);const E=(0,o.useMemo)((()=>x?.length?[{label:(0,t.__)("Select a menu","dswp"),value:0},...x.map((e=>({label:e.title.rendered||(0,t.__)("(no title)","dswp"),value:e.id})))]:[{label:(0,t.__)("Select a menu","dswp"),value:0}]),[x]),N=(0,r.useInnerBlocksProps)({className:"dswp-block-navigation__container"},{allowedBlocks:c,orientation:"horizontal",templateLock:!1});return j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.InspectorControls,{children:(0,i.jsxs)(n.PanelBody,{title:(0,t.__)("Navigation Settings","dswp"),children:[(0,i.jsx)(n.ToggleControl,{label:(0,t.__)("Show in Desktop","dswp"),checked:m,onChange:e=>{p({showInDesktop:e}),e&&p({showInMobile:!1})}}),(0,i.jsx)(n.ToggleControl,{label:(0,t.__)("Show in Mobile","dswp"),checked:h,onChange:e=>{p({showInMobile:e}),e&&p({showInDesktop:!1})}}),(0,i.jsx)(n.SelectControl,{label:(0,t.__)("Select Menu","dswp"),value:w||0,options:E,onChange:e=>{const n=parseInt(e);p({menuId:n})}}),(0,i.jsxs)(n.ButtonGroup,{children:[(0,i.jsx)("span",{className:"components-base-control__label",style:{display:"block",marginBottom:"8px"},children:(0,t.__)("Overlay Menu","dswp")}),(0,i.jsx)(n.Button,{variant:"mobile"===v?"primary":"secondary",onClick:()=>p({overlayMenu:"mobile"}),children:(0,t.__)("Mobile","dswp")}),(0,i.jsx)(n.Button,{variant:"always"===v?"primary":"secondary",onClick:()=>p({overlayMenu:"always"}),children:(0,t.__)("Always","dswp")}),(0,i.jsx)(n.Button,{variant:"never"===v?"primary":"secondary",onClick:()=>p({overlayMenu:"never"}),children:(0,t.__)("Never","dswp")})]}),(m||h||"mobile"===v)&&(0,i.jsx)("div",{style:{marginTop:"1rem"},children:(0,i.jsx)(n.RangeControl,{label:(0,t.__)("Mobile Breakpoint (px)","dswp"),value:b,onChange:e=>p({mobileBreakpoint:e}),min:320,max:1200,step:1})})]})}),(0,i.jsxs)("nav",{...f,children:[(0,i.jsx)(l,{}),(0,i.jsx)("ul",{...N})]})]}):(0,i.jsx)(n.Spinner,{})},save:function(){return null}})}},t={};function o(e){var s=t[e];if(void 0!==s)return s.exports;var r=t[e]={exports:{}};return n[e](r,r.exports,o),r.exports}o.m=n,e=[],o.O=(n,t,s,r)=>{if(!t){var a=1/0;for(u=0;u<e.length;u++){for(var[t,s,r]=e[u],i=!0,l=0;l<t.length;l++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](t[l])))?t.splice(l--,1):(i=!1,r<a&&(a=r));if(i){e.splice(u--,1);var c=s();void 0!==c&&(n=c)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,s,r]},o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={57:0,350:0};o.O.j=n=>0===e[n];var n=(n,t)=>{var s,r,[a,i,l]=t,c=0;if(a.some((n=>0!==e[n]))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var u=l(o)}for(n&&n(t);c<a.length;c++)r=a[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},t=globalThis.webpackChunkdesign_system_blocks=globalThis.webpackChunkdesign_system_blocks||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var s=o.O(void 0,[350],(()=>o(710)));s=o.O(s)})();